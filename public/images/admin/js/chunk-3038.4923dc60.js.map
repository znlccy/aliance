{"version":3,"sources":["webpack:///./src/js/api/role.js","webpack:///./src/pages/setting/rolePer.vue?9ee1","webpack:///src/pages/setting/rolePer.vue","webpack:///./src/pages/setting/rolePer.vue?9af9","webpack:///./src/pages/setting/rolePer.vue?a098","webpack:///./src/pages/setting/rolePer.vue?033c"],"names":["roleApi","data","callback","errorBack","Object","_Users_yd_Desktop_workSpace_Entrepreneurial_Industry_admin_node_modules_babel_runtime_helpers_builtin_es6_get__WEBPACK_IMPORTED_MODULE_5__","_Users_yd_Desktop_workSpace_Entrepreneurial_Industry_admin_node_modules_babel_runtime_helpers_builtin_es6_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","this","call","uri","_baseApi__WEBPACK_IMPORTED_MODULE_6__","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","staticStyle","margin-top","attrs","label-width","label","_l","permission","key","id","checked","role_status","on","change","$event","checkChange","model","value","$$v","$set","expression","_s","name","child","margin-left","item","type","loading","isLoading","click","onSubmitPer","plain","$router","back","staticRenderFns","rolePervue_type_script_lang_js_","permissionsData","permissions","permission_id","mounted","loadPermission","methods","_this","role","$route","query","res","setCheck","va","_this2","forEach","_this3","setPermissionId","assignRolePermission","$message","success","push","pers","_this4","fa","ga","setting_rolePervue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_rolePer_vue_vue_type_style_index_0_id_3ce2c2b0_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-3038.4923dc60.js","sourcesContent":["import Api from './baseApi'\n\nexport default class roleApi extends Api {\n    static roleList(data, callback, errorBack) {\n        super.request(this.uri() + 'entry', callback, errorBack, data)\n    }\n\n    static add(data, callback, errorBack) {\n        super.request(this.uri() + 'save', callback, errorBack, data)\n    }\n\n    static delete(data, callback, errorBack) {\n        super.request(this.uri() + 'delete', callback, errorBack, data)\n    }\n\n    static detail(data, callback, errorBack) {\n        super.request(this.uri() + 'detail', callback, errorBack, data)\n    }\n\n    static permissions(data, callback, errorBack) {\n        super.request(this.uri() + 'get_role_permission', callback, errorBack, data)\n    }\n\n    static assignRolePermission(data, callback, errorBack) {\n        super.request(this.uri() + 'assign_role_permission', callback, errorBack, data)\n    }\n\n    static getRolePermission(data, callback, errorBack) {\n        super.request(this.uri() + 'get_role_permission', callback, errorBack, data)\n    }\n\n    static uri() {\n        return super.url() + 'role/'\n    }\n\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pages\"},[_c('H3',[_vm._v(\"授权管理\")]),_c('div',{staticClass:\"line\"}),_c('el-form',{ref:\"form\",staticClass:\"form\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"权限\"}},[_vm._l((_vm.permissions),function(permission){return _c('div',{key:permission.id},[_c('el-checkbox',{attrs:{\"checked\":permission.role_status===1},on:{\"change\":function($event){_vm.checkChange(permission)}},model:{value:(permission.checked),callback:function ($$v) {_vm.$set(permission, \"checked\", $$v)},expression:\"permission.checked\"}},[_vm._v(_vm._s(permission.name)+\"\\n                \")]),_vm._l((permission.child),function(child){return _c('div',{key:child.id,staticStyle:{\"margin-left\":\"20px\"}},[_c('el-checkbox',{attrs:{\"checked\":child.role_status===1},on:{\"change\":function($event){_vm.checkChange(child,permission)}},model:{value:(child.checked),callback:function ($$v) {_vm.$set(child, \"checked\", $$v)},expression:\"child.checked\"}},[_vm._v(_vm._s(child.name)+\"\\n                    \")]),_c('div',{staticStyle:{\"margin-left\":\"20px\"}},_vm._l((child.child),function(item){return _c('el-checkbox',{key:item.id,attrs:{\"checked\":item.role_status===1},on:{\"change\":function($event){_vm.checkChange(item,child,permission)}},model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}},[_vm._v(\"\\n                            \"+_vm._s(item.name)+\"\\n                        \")])}))],1)})],2)}),_c('el-button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.isLoading},on:{\"click\":_vm.onSubmitPer}},[_vm._v(\"提交\\n            \")]),_c('el-button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"plain\":\"\"},on:{\"click\":function($event){_vm.$router.back()}}},[_vm._v(\"返回\\n            \")])],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style scoped>\n    .pages {\n        text-align: left;\n        padding: 0 20px;\n\n    }\n\n    .form {\n        width: 100%;\n        margin-top: 30px;\n    }\n\n</style>\n\n<template>\n    <div class=\"pages\">\n\n        <H3>授权管理</H3>\n        <div class=\"line\"></div>\n        <el-form style=\"margin-top: 20px\" class=\"form\" ref=\"form\" label-width=\"120px\">\n            <el-form-item label=\"权限\">\n                <div v-for=\"permission in permissions\" :key=\"permission.id\">\n                    <el-checkbox :checked=\"permission.role_status===1\"\n                                 v-model=\"permission.checked\"\n                                 @change=\"checkChange(permission)\">{{permission.name}}\n                    </el-checkbox>\n                    <div style=\"margin-left: 20px\" v-for=\"child in permission.child\" :key=\"child.id\">\n                        <el-checkbox @change=\"checkChange(child,permission)\"\n                                     :checked=\"child.role_status===1\"\n                                     v-model=\"child.checked\">{{child.name}}\n                        </el-checkbox>\n                        <div style=\"margin-left: 20px\">\n                            <el-checkbox @change=\"checkChange(item,child,permission)\"\n                                         :checked=\"item.role_status===1\"\n                                         v-model=\"item.checked\"\n                                         v-for=\"item in child.child\" :key=\"item.id\">\n                                {{item.name}}\n                            </el-checkbox>\n                        </div>\n                    </div>\n                </div>\n                <el-button type=\"primary\" style=\"margin-left: 50px\" :loading=\"isLoading\"\n                           @click=\"onSubmitPer\">提交\n                </el-button>\n                <el-button plain style=\"margin-left: 50px\"\n                           @click=\"$router.back()\">返回\n                </el-button>\n            </el-form-item>\n\n        </el-form>\n    </div>\n</template>\n\n<script>\n    import api from '../../js/api/role'\n\n    export default {\n        name: \"rolePer\",\n        data() {\n            return {\n                permissionsData: {},\n                permissions: {},\n                isLoading: false,\n                permission_id: [],\n            }\n        },\n        mounted() {\n            this.loadPermission();\n\n        },\n        methods: {\n            loadPermission() {\n                api.permissions({id: this.$route.query.id}, res => {\n                    this.permissions = res.data.data;\n                })\n            },\n            setCheck(permissions, va) {\n                permissions.forEach(value => {\n                    value.role_status = va;\n                    value.checked = va === 1;\n                    if (value.child != null) {\n                        this.setCheck(value.child, va)\n                    }\n                });\n            },\n            onSubmitPer() {\n                this.setPermissionId(this.permissions);\n                let data = {id: this.$route.query.id, permission_id: this.permission_id};\n                this.isLoading = true;\n                api.assignRolePermission(data, () => {\n                        this.isLoading = false;\n                        this.$message.success('授权成功');\n                        this.$router.push({name: 'role'});\n                    }\n                    , () => {\n                        this.isLoading = true;\n                    })\n            },\n            setPermissionId(pers) {\n                pers.forEach(value => {\n                    if (value.checked) {\n                        this.permission_id.push(value.id);\n                        if (value.child != null) {\n                            this.setPermissionId(value.child)\n                        }\n                    }\n                })\n            },\n            checkChange(value, fa, ga) {\n                let va = value.checked ? 1 : 0;\n                value.role_status = va;\n                value.checked = va === 1;\n                if (value.child != null) {\n                    this.setCheck(value.child, va)\n                }\n                if (value.checked) {\n                    if (fa != null) {\n                        fa.checked = true;\n                        fa.role_status = 1;\n                    }\n                    if (ga != null) {\n                        ga.checked = true;\n                        ga.role_status = 1;\n                    }\n                }\n            },\n        }\n    }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rolePer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rolePer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rolePer.vue?vue&type=template&id=3ce2c2b0&scoped=true&\"\nimport script from \"./rolePer.vue?vue&type=script&lang=js&\"\nexport * from \"./rolePer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rolePer.vue?vue&type=style&index=0&id=3ce2c2b0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ce2c2b0\",\n  null\n  \n)\n\ncomponent.options.__file = \"rolePer.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rolePer.vue?vue&type=style&index=0&id=3ce2c2b0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rolePer.vue?vue&type=style&index=0&id=3ce2c2b0&scoped=true&lang=css&\""],"sourceRoot":""}