{"version":3,"sources":["webpack:///./src/components/smsCode.vue?16de","webpack:///./src/pages/login.vue?4732","webpack:///./src/components/smsCode.vue?f016","webpack:///./src/js/api/verify.js","webpack:///src/components/smsCode.vue","webpack:///./src/components/smsCode.vue?2c2e","webpack:///./src/components/smsCode.vue","webpack:///./src/js/api/account.js","webpack:///src/pages/login.vue","webpack:///./src/pages/login.vue?c5a4","webpack:///./src/pages/login.vue?f516","webpack:///./src/pages/login.vue?1fdb"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_smsCode_vue_vue_type_style_index_0_id_556074d8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","isValidation","class","accountLogin","on","click","$event","staticStyle","margin-top","attrs","placeholder","model","accountData","callback","$$v","$set","type","loading","load","accountLoginBtn","smsData","width","ref","margin-left","phone","mobile","codeLoginBtn","_s","font-size","line-height","color","refLogin","staticRenderFns","smsCodevue_type_template_id_556074d8_scoped_true_render","disabled","disable","getCode","timer","count","smsCodevue_type_template_id_556074d8_scoped_true_staticRenderFns","verify_verify","errorBack","data","Object","get","getPrototypeOf","verify","call","baseApi","smsCodevue_type_script_lang_js_","props","methods","code","console","log","_this","isPoneAvailable","smsCode","$message","message","timerStart","_this2","setInterval","clearInterval","str","myreg","test","text","components_smsCodevue_type_script_lang_js_","component","componentNormalizer","options","__file","components_smsCode","account_accountApi","accountApi","uri","loginvue_type_script_lang_js_","components","password","mounted","$store","dispatch","login","res","$router","push","isStrValid","toCode","error","smsLogin","$refs","pages_loginvue_type_script_lang_js_","login_component","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_db661046_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-4e35.3035a49b.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./smsCode.vue?vue&type=style&index=0&id=556074d8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./smsCode.vue?vue&type=style&index=0&id=556074d8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('el-card',{staticClass:\"login\"},[_c('h2',[_vm._v(\" 创业论坛管理后台\")]),_c('h3',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isValidation),expression:\"isValidation\"}]},[_vm._v(\" 验证手机号\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isValidation),expression:\"!isValidation\"}]},[_c('span',{class:_vm.accountLogin?'login_span_select':'',on:{\"click\":function($event){_vm.accountLogin=true}}},[_vm._v(\"账号登录\")]),_c('span',{staticClass:\"login_span_line\"},[_vm._v(\"|\")]),_c('span',{class:_vm.accountLogin?'':'login_span_select',on:{\"click\":function($event){_vm.accountLogin=false}}},[_vm._v(\"验证码登录\")])]),_c('el-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.accountLogin),expression:\"accountLogin\"}],staticStyle:{\"margin-top\":\"20px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入手机号\"},model:{value:(_vm.accountData.mobile),callback:function ($$v) {_vm.$set(_vm.accountData, \"mobile\", $$v)},expression:\"accountData.mobile\"}}),_c('el-input',{attrs:{\"placeholder\":\"请输入密码\",\"type\":\"password\"},model:{value:(_vm.accountData.password),callback:function ($$v) {_vm.$set(_vm.accountData, \"password\", $$v)},expression:\"accountData.password\"}}),_c('br'),_c('el-button',{staticClass:\"login_btn\",attrs:{\"loading\":_vm.load,\"type\":\"primary\"},on:{\"click\":_vm.accountLoginBtn}},[_vm._v(\" 登录\")])],1),_c('el-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.accountLogin),expression:\"!accountLogin\"}],staticStyle:{\"margin-top\":\"20px\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入手机号\"},model:{value:(_vm.smsData.mobile),callback:function ($$v) {_vm.$set(_vm.smsData, \"mobile\", $$v)},expression:\"smsData.mobile\"}}),_c('div',[_c('el-input',{staticStyle:{\"width\":\"180px\"},attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.smsData.code),callback:function ($$v) {_vm.$set(_vm.smsData, \"code\", $$v)},expression:\"smsData.code\"}}),_c('sms-code',{ref:\"code\",staticStyle:{\"margin-left\":\"30px\"},attrs:{\"phone\":_vm.smsData.mobile}})],1),_c('br'),_c('el-button',{staticClass:\"login_btn\",attrs:{\"loading\":_vm.load,\"type\":\"primary\"},on:{\"click\":_vm.codeLoginBtn}},[_vm._v(\"\\n                \"+_vm._s(_vm.isValidation?'验证':'登录')+\"\\n            \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isValidation),expression:\"isValidation\"}]},[_c('span',{staticStyle:{\"font-size\":\"14px\",\"line-height\":\"40px\",\"color\":\"dodgerblue\"},on:{\"click\":function($event){_vm.refLogin()}}},[_vm._v(\"重新登录\")])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-button',{attrs:{\"loading\":_vm.load,\"type\":\"primary\",\"disabled\":_vm.disable},on:{\"click\":function($event){_vm.getCode(_vm.phone)}}},[_vm._v(\"\\n    \"+_vm._s(this.timer !==null?'请在'+_vm.count+'秒后重试':'获取短信验证码')+\"\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Api from './baseApi'\n\nexport default class verify extends Api {\n\n    static smsCode(phone, callback, errorBack) {\n        let data = {\n            mobile: phone\n        };\n        super.request('/index/sms/attain', callback, errorBack, data)\n    }\n}\n","<template>\n    <el-button :loading=\"load\" type=\"primary\" :disabled=\"disable\" @click=\"getCode(phone)\">\n        {{this.timer !==null?'请在'+count+'秒后重试':'获取短信验证码'}}\n    </el-button>\n</template>\n\n<script>\n    import Api from '../js/api/verify'\n\n    export default {\n        name: \"smsCode\",\n        props: ['phone'],\n        data() {\n            return {\n                timer: null,\n                count: 60,\n                disable: false,\n                load: false,\n            }\n        },\n        methods: {\n            code() {\n                console.log(\"1223311\");\n            },\n            getCode(phone) {\n                if (!this.timer) {\n                    if (this.isPoneAvailable(phone)) {\n                        this.load = true;\n                        Api.smsCode(phone, () => {\n                            this.load = false;\n                            this.$message({\n                                type: 'success',\n                                message: '验证码发送成功',\n                            });\n                            this.timerStart();\n                        }, () => {\n                            this.load = false;\n                        });\n\n                    } else {\n                        console.log(this.phone);\n                        this.message('请输入正确的手机号')\n                    }\n                }\n            },\n            timerStart() {\n                this.disable = true;\n                this.timer = setInterval(() => {\n                    if (this.count > 0 && this.count <= 60) {\n                        this.count--;\n                    } else {\n                        clearInterval(this.timer);\n                        this.timer = null;\n                        this.disable = false;\n                        this.count = '60'\n                    }\n                }, 1000)\n            },\n\n            isPoneAvailable(str) {\n                const myreg = /^[1][3,4,5,6,7,8,9][0-9]{9}$/;\n                return myreg.test(str);\n            },\n            message(text) {\n                this.$message({\n                    type: 'error',\n                    message: text,\n                });\n            }\n        },\n\n    }\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./smsCode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./smsCode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./smsCode.vue?vue&type=template&id=556074d8&scoped=true&\"\nimport script from \"./smsCode.vue?vue&type=script&lang=js&\"\nexport * from \"./smsCode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./smsCode.vue?vue&type=style&index=0&id=556074d8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"556074d8\",\n  null\n  \n)\n\ncomponent.options.__file = \"smsCode.vue\"\nexport default component.exports","import Api from './baseApi'\n\nexport default class accountApi extends Api {\n    static smsLogin(data, callback, errorBack) {\n        super.request(this.uri() + 'mobile_login', callback, errorBack, data)\n    }\n\n    static accountLogin(data, callback, errorBack) {\n        super.request(this.uri() + 'account_login', callback, errorBack, data)\n    }\n\n    static uri() {\n        return super.url() + 'admin/'\n    }\n\n    static isPoneAvailable(str) {\n        const myreg = /^[1][3,4,5,6,7,8,9][0-9]{9}$/;\n        return myreg.test(str);\n    }\n\n}\n","<style scoped lang=\"less\">\n    .page {\n        width: 100%;\n        height: 100%;\n        background: url('../assets/bg.jpg');\n        background-size: 100%;\n        position: relative;\n        cursor: pointer;\n    }\n\n    .login {\n        position: absolute;\n        width: 500px;\n        height: 480px;\n        background: white;\n        right: 100px;\n        top: 200px;\n        span {\n            font-size: 18px;\n        }\n    }\n\n    .login_span_select {\n        color: dodgerblue;\n    }\n\n    .login_span_line {\n        margin-left: 20px;\n        margin-right: 20px;\n    }\n\n    .el-input {\n        margin: 20px 0;\n        width: 350px;\n    }\n\n    .login_btn {\n        width: 350px;\n        margin-top: 50px;\n    }\n</style>\n\n<template>\n    <div class=\"page\">\n        <el-card class=\"login\">\n            <h2> 创业论坛管理后台</h2>\n            <h3 v-show=\"isValidation\"> 验证手机号</h3>\n            <div v-show=\"!isValidation\">\n                <span :class=\"accountLogin?'login_span_select':''\" @click=\"accountLogin=true\">账号登录</span>\n                <span class=\"login_span_line\">|</span>\n                <span :class=\"accountLogin?'':'login_span_select'\" @click=\"accountLogin=false\">验证码登录</span>\n            </div>\n\n            <el-row style=\"margin-top: 20px\" v-show=\"accountLogin\">\n                <el-input placeholder=\"请输入手机号\" v-model=\"accountData.mobile\"></el-input>\n                <el-input placeholder=\"请输入密码\" v-model=\"accountData.password\" type=\"password\"></el-input>\n                <br/>\n                <el-button :loading=\"load\" class=\"login_btn\" type=\"primary\" @click=\"accountLoginBtn\"> 登录</el-button>\n            </el-row>\n            <el-row style=\"margin-top: 20px\" v-show=\"!accountLogin\">\n                <el-input placeholder=\"请输入手机号\" v-model=\"smsData.mobile\"></el-input>\n                <div>\n                    <el-input placeholder=\"请输入验证码\" v-model=\"smsData.code\" style=\"width: 180px\"></el-input>\n                    <sms-code ref=\"code\" style=\"margin-left: 30px\" :phone=\"smsData.mobile\"></sms-code>\n                </div>\n                <br/>\n                <el-button :loading=\"load\" class=\"login_btn\" type=\"primary\" @click=\"codeLoginBtn\">\n                    {{isValidation?'验证':'登录'}}\n                </el-button>\n                <div v-show=\"isValidation\">\n                    <span style=\"font-size: 14px;line-height: 40px;color: dodgerblue\"\n                          @click=\"refLogin()\">重新登录</span>\n                </div>\n            </el-row>\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import smsCode from '../components/smsCode'\n    import api from '../js/api/account'\n\n    export default {\n        name: \"login\",\n        components: {\n            smsCode\n        },\n        data() {\n            return {\n                accountLogin: true,\n                isValidation: false,\n                load: false,\n                accountData: {\n                    mobile: '',\n                    password: '',\n                },\n                smsData: {\n                    mobile: '',\n                    code: '',\n                }\n            }\n        },\n        mounted() {\n            this.$store.dispatch('logout');\n        },\n        methods: {\n            login(res) {\n                this.$store.dispatch('login', res.data);\n                this.$router.push({\n                    name: \"home\",\n                });\n            },\n            refLogin() {\n                this.accountLogin = true;\n                this.isValidation = false;\n            },\n            accountLoginBtn() {\n                if (!api.isPoneAvailable(this.accountData.mobile)) {\n                    this.$message.error('请输入正确的手机号');\n                    return;\n                }\n                if (!api.isStrValid(this.accountData.password)) {\n                    this.$message.error('请输入密码');\n                    return;\n                }\n                this.load = true;\n                api.accountLogin(this.accountData, res => {\n                    this.login(res);\n                }, res => {\n                    this.load = false;\n                    if (res.data.code == 302) {\n                        this.toCode();\n                    }\n                })\n            },\n            codeLoginBtn() {\n                if (!api.isPoneAvailable(this.smsData.mobile)) {\n                    this.$message.error('请输入正确的手机号');\n                    return;\n                }\n                if (!api.isStrValid(this.smsData.code)) {\n                    this.$message.error('请输入验证码');\n                    return;\n                }\n                this.load = true;\n                api.smsLogin(this.smsData, res => {\n                    this.login(res);\n                }, () => {\n                    this.load = false;\n                })\n            },\n            toCode() {\n                this.accountLogin = false;\n                this.isValidation = true;\n                this.smsData.mobile = this.accountData.mobile;\n                this.$refs.code.getCode(this.smsData.mobile);\n            }\n        },\n    }\n</script>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=db661046&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=db661046&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"db661046\",\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=db661046&scoped=true&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=db661046&scoped=true&lang=less&\""],"sourceRoot":""}