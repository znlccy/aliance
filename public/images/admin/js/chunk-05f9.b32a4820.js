(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05f9"],{"07c7":function(t,e,i){"use strict";i.d(e,"a",function(){return u});var a=i("c665"),l=i("dc0a"),s=i("aa9a"),r=i("d328"),n=i("11d9"),o=i("b8d7"),c=i("4a2d"),u=function(t){function e(){return Object(a["a"])(this,e),Object(r["a"])(this,Object(n["a"])(e).apply(this,arguments))}return Object(s["a"])(e,null,[{key:"index",value:function(t,i,a){Object(o["a"])(Object(n["a"])(e),"request",this).call(this,this.uri()+"entry",i,a,t)}},{key:"save",value:function(t,i,a){Object(o["a"])(Object(n["a"])(e),"request",this).call(this,this.uri()+"save",i,a,t)}},{key:"detail",value:function(t,i,a){Object(o["a"])(Object(n["a"])(e),"request",this).call(this,this.uri()+"detail",i,a,t)}},{key:"delete",value:function(t,i,a){Object(o["a"])(Object(n["a"])(e),"request",this).call(this,this.uri()+"delete",i,a,t)}},{key:"uri",value:function(){return Object(o["a"])(Object(n["a"])(e),"url",this).call(this)+"column/"}}]),Object(l["a"])(e,t),e}(c["a"])},"0fb0":function(t,e,i){},"42f5":function(t,e,i){"use strict";var a=i("0fb0"),l=i.n(a);l.a},"51f0":function(t,e,i){"use strict";i.d(e,"a",function(){return u});var a=i("c665"),l=i("dc0a"),s=i("aa9a"),r=i("d328"),n=i("11d9"),o=i("b8d7"),c=i("4a2d"),u=function(t){function e(){return Object(a["a"])(this,e),Object(r["a"])(this,Object(n["a"])(e).apply(this,arguments))}return Object(s["a"])(e,null,[{key:"save",value:function(t,i,a){Object(o["a"])(Object(n["a"])(e),"request",this).call(this,this.uri()+"save",i,a,t)}},{key:"list",value:function(t,i,a){Object(o["a"])(Object(n["a"])(e),"request",this).call(this,this.uri()+"entry",i,a,t)}},{key:"detail",value:function(t,i,a){Object(o["a"])(Object(n["a"])(e),"request",this).call(this,this.uri()+"detail",i,a,t)}},{key:"delete",value:function(t,i,a){Object(o["a"])(Object(n["a"])(e),"request",this).call(this,this.uri()+"delete",i,a,t)}},{key:"uri",value:function(){return Object(o["a"])(Object(n["a"])(e),"url",this).call(this)+"dynamic/"}}]),Object(l["a"])(e,t),e}(c["a"])},b4ea:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pages"},[i("H3",[t._v("基础信息")]),i("div",{staticClass:"line"}),i("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"活动名称"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"活动栏目"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.column_id,callback:function(e){t.$set(t.form,"column_id",e)},expression:"form.column_id"}},t._l(t.columns,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),i("el-form-item",{attrs:{label:"封面图"}},[i("image-select",{attrs:{url:t.form.picture},model:{value:t.img,callback:function(e){t.img=e},expression:"img"}})],1),i("el-form-item",{attrs:{label:"动态简介"}},[i("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:5,placeholder:"请输入"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),i("el-form-item",{attrs:{label:"推荐"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.recommend,callback:function(e){t.$set(t.form,"recommend",e)},expression:"form.recommend"}},[i("el-option",{attrs:{value:1,label:"是"}}),i("el-option",{attrs:{value:0,label:"否"}})],1)],1),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[i("el-option",{attrs:{value:1,label:"启用"}}),i("el-option",{attrs:{value:0,label:"禁用"}})],1)],1),i("div",[i("rich-view",{model:{value:t.form.rich_text,callback:function(e){t.$set(t.form,"rich_text",e)},expression:"form.rich_text"}})],1),i("el-form-item",{staticStyle:{"margin-top":"100px"}},[i("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary",loading:t.isLoading},on:{click:t.onSubmit}},[t._v("提交\n            ")]),i("el-button",{on:{click:t.back}},[t._v("返回")])],1)],1)],1)},l=[],s=i("51f0"),r=i("07c7"),n={data:function(){return{form:{id:null,title:null,description:null,picture:null,column_id:null,recommend:0,status:0,rich_text:null},isLoading:!1,columns:[],img:null}},mounted:function(){void 0!==this.$route.query.id&&this.loadData(),this.loadColumn()},methods:{loadColumn:function(){var t=this;r["a"].index({page_size:999},function(e){t.columns=e.data.data.data})},loadData:function(){var t=this;s["a"].detail({id:this.$route.query.id},function(e){t.form=e.data.data})},edit:function(){this.isNoEdit=!1},onSubmit:function(){var t=this;if(s["a"].isStrValid(this.form.title))if(s["a"].isStrValid(this.form.column_id))if(null!=this.img||null!=this.form.picture)if(s["a"].isStrValid(this.form.description))if(s["a"].isStrValid(this.form.rich_text)){var e=s["a"].objToFormData(this.form);e.append("picture",this.img),this.isLoading=!0,s["a"].save(e,function(e){t.isLoading=!1,t.$message.success(e.data.message),t.$router.push({name:"dynamic"}),t.$route.meta.keepAlive=!1},function(){t.isLoading=!1})}else this.$message.error("请输入活动内容富文本");else this.$message.error("请输入动态简介");else this.$message.error("请选择图片");else this.$message.error("请选择栏目");else this.$message.error("请输入动态名称")},back:function(){this.$router.back()}}},o=n,c=(i("42f5"),i("2877")),u=Object(c["a"])(o,a,l,!1,null,"b101fdf0",null);u.options.__file="add.vue";e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-05f9.b32a4820.js.map